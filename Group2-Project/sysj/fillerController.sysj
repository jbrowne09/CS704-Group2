fillerController(
    input signal canBottom, canTop, fillerEnable, tick;
    output signal inletOn, injectorOn, valveRetract, valveExtend, fillerDone;
)

->{	
	while(true){
		//await(fillerEnable);
		await(tick);
		abort(canTop) {
			{sustain injectorOn;}
			||
			{present (canBottom) {
				emit valveRetract;
			}
			}
		}
		abort(canBottom) {
			{sustain inletOn;}
			||
			{sustain valveExtend;}	
		}
		emit fillerDone;
	}
}